# RDS

## RDS 백업

* RDS는 설정된 시간마다 모든 데이터베이스에 대한 정보를 가지고 있는 스냅샷을 생성함

* 첫 스냅샷은 데이터베이스의 모든 데이터를 포함하고, 두 번째부턴 변경된 사항만 저장함

### 백업 스토리지

* 리전에 있는 모든 rds 스냅샷을 저장할 수 있는 스토리지

### 백업 기간(backup window)

* 매일 지정된 백업 기간에 스냅샷을 생성함
    * 스냅샷을 생성하는 작업이 지정된 기간을 넘어가도 작업이 완료될 때까지 계속 진행함

* 백업 기간을 따로 설정하지 않으면 리전 별로 기본 백업 기간에 작업을 진행함

### 백업 보존 기간

* 따로 설정하지 않으면
    * aws 콘솔로 rds 인스턴스를 생성했을때 7일
    * rds API 또는 cli로 인스턴스를 생성했을때 1일

* 중지된 인스턴스의 스냅샷은 생성하지 않음

## 자동 백업 설정

* 백업 보존 기간 값을 0이 아닌 양수로 설정하여 자동 백업을 활성화시킬 수 있음

## 자동 백업 보존

### 보존 기간

* 원본 db 인스턴스에 대해 만료될 때와 동일하게 만료됨

* 단, 최종 스냅샷은 만료되지 않으므로 rds 인스턴스 삭제할 때 최종 스냅샷을 만드는 것이 좋음

### 복원

* rds 콘솔 창에서 복원 버튼을 클릭하면 새 인스턴스를 생성함